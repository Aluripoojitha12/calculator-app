:root{
  /* Colors */
  --bg:#f6f3f4;
  --grad1:#ff6fa0;
  --grad2:#ff9a88;
  --panel:#ffffff;
  --key:#f0e6ea;
  --op:#efc0c7;
  --accent:#f3e1a4;
  --ok:#9bd09b;
  --text:#222;
  --shadow:0 10px 28px rgba(0,0,0,.12);

  /* Spacing */
  --outer-pad: clamp(10px, 2vmin, 32px);
  --gap: clamp(10px, 1.6vmin, 16px);
  --pad: clamp(12px, 1.8vmin, 28px);

  /* MASTER SCALE — drives keypad size, display height, and fonts */
  --btn-size: clamp(60px, 9vmin, 120px);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  min-height:100vh;
  display:grid;
  place-items:center;
  padding:var(--outer-pad);
}

/* ========== Centered Card (round keys) ========== */
.calc{
  /* Width matches 4 cols of --btn-size + gaps + padding */
  width: min(
    100vw - calc(var(--outer-pad)*2),
    calc(var(--btn-size)*4 + var(--gap)*3 + var(--pad)*2)
  );
  max-width: 1100px;
  background:var(--panel);
  border-radius:28px;
  box-shadow:var(--shadow);
  overflow:hidden;
  display:flex;flex-direction:column;
}

/* DISPLAY scales with --btn-size */
.screen{
  min-height: calc(var(--btn-size) * 2.2);
  background:linear-gradient(160deg,var(--grad1),var(--grad2));
  color:#fff;
  padding: calc(var(--pad)*1.2) var(--pad);
  display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;
}
.expr{
  width:100%; text-align:right; opacity:.9;
  font-size: clamp(1rem, calc(var(--btn-size)*0.28), 1.6rem);
  line-height:1.35; min-height:2em; overflow-wrap:anywhere;
}
.res{
  width:100%; text-align:right; font-weight:700;
  font-size: clamp(1.8rem, calc(var(--btn-size)*0.65), 3.8rem);
  line-height:1.1; margin-top:.25rem;
}

/* KEYPAD — fixed 4 columns of var(--btn-size) */
.keys{
  padding:var(--pad);
  display:grid;
  grid-template-columns: repeat(4, var(--btn-size));
  grid-auto-rows: var(--btn-size);
  justify-content:center;   /* center grid inside the card */
  gap:var(--gap);
}

/* Circular keys (default mode) */
.keys button{
  width:100%; height:100%;
  border:none; border-radius:999px;
  background:var(--key); color:var(--text);
  font-size: clamp(1rem, calc(var(--btn-size)*0.28), 1.6rem);
  box-shadow:inset 0 -2px 0 rgba(0,0,0,.06);
  cursor:pointer;
  transition:transform .05s ease, filter .2s ease;
}
.keys button:active{ transform:scale(.97); }
.keys .op{ background:var(--op); }
.keys .accent{ background:var(--accent); }
.keys .equals{ background:var(--ok); color:#123012; }
@media (hover:hover){ .keys button:hover{ filter:brightness(.97); } }

/* ===== Tuning for different screens ===== */
/* Short laptops / low height: shrink to avoid overflow */
@media (max-height: 740px){
  :root{ --btn-size: clamp(50px, 7.5vmin, 96px); }
}
/* Huge monitors: allow bigger presence (capped) */
@media (min-width: 1400px) and (min-height: 900px){
  :root{ --btn-size: clamp(84px, 8.5vmin, 140px); }
  .calc{ max-width: 1280px; }
}

/* ========== Desktop VARIANT: FULL-WIDTH BAR (keep same order as mobile) ========== */
@media (min-width: 1024px){
  .calc.layout--bar{
    width:100vw; height:100vh; max-width:none;
    border-radius:0; box-shadow:none;
  }
  body:has(.calc.layout--bar){
    margin:0; padding:0; place-items:start stretch;
  }

  .layout--bar .screen{
    min-height: clamp(140px, 28vh, 320px);
    padding: 24px 36px;
  }

  /* IMPORTANT: 4 columns so the order is identical to mobile */
  .layout--bar .keys{
    flex:1;
    padding: 18px 36px 28px;
    grid-template-columns: repeat(4, 1fr);   /* was 8 — now 4 */
    grid-auto-rows: minmax(56px, 1fr);       /* rows stretch to fill height */
    gap: 12px 14px;
    justify-content: stretch;
    align-content: stretch;
  }

  /* keep your rectangular look on desktop bar */
  .layout--bar .keys button{
    border-radius:14px;
    font-size: clamp(16px, 1.1vw, 20px);
    width:100%; height:100%;
  }
}
