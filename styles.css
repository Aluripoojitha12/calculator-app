:root{
  /* Colors */
  --bg:#f4f1f2;
  --grad1:#f68aa6;
  --grad2:#ff9b86;
  --panel:#fff;
  --key:#eee6ea;
  --op:#e9c0c7;
  --accent:#f3e1a4;
  --ok:#9bd09b;
  --text:#222;
  --shadow:0 10px 28px rgba(0,0,0,.12);

  /* Base layout tokens (overridden by media queries below) */
  --outer-pad: clamp(10px, 2vmin, 32px);
  --gap: clamp(10px, 1.6vmin, 18px);
  --pad: clamp(12px, 1.8vmin, 28px);
  /* Button size drives the whole calculator scale */
  --btn-size: clamp(60px, 9vmin, 120px);
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  background: var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  min-height:100vh;
  display:grid;
  place-items:center;
  padding: var(--outer-pad);
}

/* ========= CALCULATOR ========= */
.calc{
  /* Width driven by button size: 4 columns + gaps + padding */
  width: min(
    100vw - calc(var(--outer-pad) * 2),
    calc(var(--btn-size) * 4 + var(--gap) * 3 + var(--pad) * 2)
  );
  /* Let it become big on desktop, but cap sensibly */
  max-width: 1100px;

  background: var(--panel);
  border-radius: 24px;
  box-shadow: var(--shadow);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

/* ========= DISPLAY ========= */
.screen{
  /* Tall screen that scales with btn size */
  min-height: calc(var(--btn-size) * 2.2);
  background: linear-gradient(160deg, var(--grad1), var(--grad2));
  color:#fff;
  padding: calc(var(--pad) * 1.2) var(--pad);
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  justify-content:flex-end;
}

.expr{
  width:100%;
  text-align:right;
  opacity:.9;
  /* font size tracks button size */
  font-size: clamp(1rem, calc(var(--btn-size) * 0.28), 1.6rem);
  line-height:1.35;
  min-height: 2em;
  overflow-wrap:anywhere;
}
.res{
  width:100%;
  text-align:right;
  font-weight:700;
  font-size: clamp(1.8rem, calc(var(--btn-size) * 0.65), 3.8rem);
  line-height:1.1;
  margin-top:.25rem;
}

/* ========= KEYPAD ========= */
.keys{
  padding: var(--pad);
  display:grid;
  grid-template-columns: repeat(4, var(--btn-size));
  grid-auto-rows: var(--btn-size);
  justify-content:center;    /* center grid when container wider */
  gap: var(--gap);
}

.keys button{
  width:100%;
  height:100%;
  border:none;
  border-radius:50%;
  font-size: clamp(1rem, calc(var(--btn-size) * 0.28), 1.6rem);
  background: var(--key);
  color: var(--text);
  cursor:pointer;
  transition: transform .05s ease, filter .2s ease;
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.06);
}
.keys button:active{ transform: scale(.97); }

.keys .op{ background: var(--op); }
.keys .accent{ background: var(--accent); }
.keys .equals{ background: var(--ok); color:#123012; }

@media (hover:hover){
  .keys button:hover{ filter: brightness(.97); }
}

/* ========== RESPONSIVE TUNING ==========
   Short screens (e.g., laptop landscape) → shrink buttons a bit */
@media (max-height: 740px){
  :root{ --btn-size: clamp(50px, 7.5vmin, 96px); }
}

/* Very wide & tall desktops → allow a bigger presence */
@media (min-width: 1200px) and (min-height: 900px){
  :root{ --btn-size: clamp(84px, 8.5vmin, 140px); }
  .calc{ max-width: 1280px; }
}

/* Ultra-narrow devices or split-screen */
@media (max-width: 360px){
  :root{
    --btn-size: clamp(50px, 18vw, 66px);
    --gap: 8px;
  }
}
